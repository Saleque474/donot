1
00:00:01,320 --> 00:00:07,890
So and the previous video we saw how we can replace a file that is being downloaded by a target computer

2
00:00:08,160 --> 00:00:12,410
with another file and we replace any X with a backdoor.

3
00:00:12,510 --> 00:00:18,420
So one of the first lines that he asks that we gained full access to their computer of course we had

4
00:00:18,420 --> 00:00:22,010
to do this while we were in the middle.

5
00:00:22,060 --> 00:00:27,530
The problem is when the what we actually did we replaced the file that was being downloaded.

6
00:00:27,670 --> 00:00:34,600
So when the person ran the file the file that worked did not produce the result that the user was expecting.

7
00:00:34,600 --> 00:00:39,510
For example let's say the user was downloading 7 zip when they double clicked it.

8
00:00:39,910 --> 00:00:42,850
Our back to around 7 zip didn't run.

9
00:00:42,850 --> 00:00:46,620
So the user might suspect us something went wrong.

10
00:00:47,050 --> 00:00:52,990
Well they can manually go ahead before the user downloads anything try to backdoor 7 zip and replace

11
00:00:52,990 --> 00:00:53,930
it with 7.

12
00:00:54,100 --> 00:00:57,460
But you never know what the target person is going to download anyway.

13
00:00:58,540 --> 00:01:04,660
So what we're going to use today is a proxy called the backdoor factory proxy where this proxy will

14
00:01:04,660 --> 00:01:11,710
do is on the fly as the person decides to download the file whether the file is an easy or easy.

15
00:01:12,070 --> 00:01:14,610
It's going to back up this file.

16
00:01:14,830 --> 00:01:20,770
So it's going to use the same file that it's been downloaded and our backdoor to it.

17
00:01:20,800 --> 00:01:25,930
So when the person runs it is going to look like as if they are running their actual file and the actual

18
00:01:25,930 --> 00:01:32,910
file will work it's not going to be corrupt and our backdoor is going to run at the same time.

19
00:01:33,060 --> 00:01:36,640
This will work against Windows OS X machines.

20
00:01:37,650 --> 00:01:43,290
So the first thing you want to do is you want to go on your configuration file for the backdoor factory

21
00:01:44,070 --> 00:01:47,530
and modify and add your IP address in there.

22
00:01:47,700 --> 00:01:49,800
So let me go there and show you.

23
00:01:50,070 --> 00:01:55,200
So we're going to put the IP address where we want to get the show and previous videos we were actually

24
00:01:55,200 --> 00:01:58,070
sent in the show to our the next machine.

25
00:01:58,170 --> 00:02:04,190
Today we're going to get the shell here on our hunter machine just because we're not connecting it to

26
00:02:04,280 --> 00:02:07,800
USP it's going to be a wireless attack and I'll show you how to do it.

27
00:02:07,800 --> 00:02:08,990
It's exactly the same.

28
00:02:08,990 --> 00:02:12,960
We're going to use with us voice and multi-hundred to listen on a port.

29
00:02:13,140 --> 00:02:17,840
So we're going to be run the exact same commands that we run on Linux in order to listen for a.

30
00:02:18,710 --> 00:02:22,500
Now before we do that I go to the configuration file.

31
00:02:22,640 --> 00:02:23,590
So I'll show you what it is.

32
00:02:23,590 --> 00:02:32,120
I already have it open here so I have a route so far here downloaded from the paste are free and simple

33
00:02:32,200 --> 00:02:33,290
and works.

34
00:02:33,800 --> 00:02:37,360
So data local Karlee.

35
00:02:37,570 --> 00:02:38,180
If you see

36
00:02:41,370 --> 00:02:46,350
bact or proxied and then click on the configuration file.

37
00:02:46,350 --> 00:02:48,380
Now I'm not going to change anything in this file.

38
00:02:48,380 --> 00:02:56,480
The only thing that I'm going to change is my current IP address because this proxy backdoor is any

39
00:02:56,720 --> 00:03:03,710
downloaded zip or eat or wrocław is executables what you want to do if you start a multi-hundred or

40
00:03:03,710 --> 00:03:04,860
on only one file.

41
00:03:04,970 --> 00:03:10,430
You're only going to receive one type of shelves so you will not be able to receive shelves for different

42
00:03:10,430 --> 00:03:11,720
operating systems.

43
00:03:11,720 --> 00:03:18,560
So what this does it actually comes in with with a test flight script that runs a number of hands are

44
00:03:18,560 --> 00:03:24,610
instances simultaneously so that you can listen on different parts for different operating systems.

45
00:03:24,800 --> 00:03:32,140
So you can see here if you scroll down you'll see that it's going to ask you to put your IP address

46
00:03:32,140 --> 00:03:35,740
for the next payloads for the Windows payloads.

47
00:03:35,740 --> 00:03:42,460
Now fix that for the Windows payloads and I put my IP address which is 1 9 2 1 6 8 17.

48
00:03:42,640 --> 00:03:46,840
This is my IP address of this net Hunter device.

49
00:03:47,110 --> 00:03:50,530
And as you can see here I have that on here for this device.

50
00:03:50,530 --> 00:03:57,310
And also note the Fords and you can see that it's asking you for Macintosh as well.

51
00:03:57,430 --> 00:04:04,020
And you can also modify the type of payload that's going to be executed or that's going to be used for

52
00:04:04,050 --> 00:04:07,560
each of these operating systems.

53
00:04:07,570 --> 00:04:14,190
So in order to listen to the parts you can run the script that comes in with back to our factory use

54
00:04:14,190 --> 00:04:20,340
in this command so we're going to do most of console are that use the scripts but as you can see here

55
00:04:20,630 --> 00:04:25,570
now today I'm not going to use the script because it runs a number of instances and is going to put

56
00:04:25,570 --> 00:04:29,060
a lot of load on my hunter device.

57
00:04:29,200 --> 00:04:34,600
So I'm actually going to use a manual multi-hundred like we did it before and I'm only going to listen

58
00:04:34,930 --> 00:04:39,670
for the Windows connections because I'm going to be targeting a Windows device so I'm only going to

59
00:04:39,670 --> 00:04:46,390
be listening for the Windows connections for the X 86 which is this one 1 4 8 8 4 4 3.

60
00:04:46,390 --> 00:04:51,730
So I actually don't need this file right now but I'm just showing you if you want to use the script

61
00:04:52,370 --> 00:04:56,490
you would put your IPs in there and then you run the script using this command.

62
00:04:57,620 --> 00:04:59,360
So for me I'm just going to do it manually.

63
00:04:59,360 --> 00:05:00,380
I'll do it next.

64
00:05:00,680 --> 00:05:02,930
But before I do that I'm going to do.

65
00:05:03,050 --> 00:05:05,690
I'm going to start my back backdoor factory.

66
00:05:07,000 --> 00:05:11,120
And after I do that we're going to do the same what we did with the SSL strip.

67
00:05:11,220 --> 00:05:16,380
We're going to use IP tables to redirect any packet coming on port 80.

68
00:05:16,410 --> 00:05:18,710
We're going to redirect it to 88.

69
00:05:19,020 --> 00:05:23,560
We're going to do this because our factory runs on port 88.

70
00:05:23,580 --> 00:05:30,040
You can change just from the same configuration here that we were looking at just a second ago but I'm

71
00:05:30,270 --> 00:05:35,380
leaving it at 88 so we're going to redirect any packet coming at 80 to 88.

72
00:05:35,550 --> 00:05:41,640
So that's our factory can analyze it if it finds that it is an executable It's a backdoor for us and

73
00:05:41,640 --> 00:05:44,040
then we can hide the target's computer.

74
00:05:44,370 --> 00:05:46,130
So this is what I'm going to do next.

75
00:05:46,120 --> 00:05:48,750
Let's go on my Kelly machine.

76
00:05:48,750 --> 00:05:50,280
I'm going to go on my terminal's

77
00:05:54,230 --> 00:06:03,850
and I'm going to run box just as simple as I'll give it two seconds to load and that's it.

78
00:06:03,850 --> 00:06:07,140
Back to our factories is working now the next thing you want to do.

79
00:06:07,140 --> 00:06:12,970
As I said is run IP tables in order to redirect any packet coming on port 80 to 88.

80
00:06:13,000 --> 00:06:15,280
We're back to our factories running.

81
00:06:15,430 --> 00:06:19,240
So I have the command here and I'm going to just have a..

82
00:06:19,240 --> 00:06:23,890
And you don't see any error messages that means the command was ran successfully.

83
00:06:23,890 --> 00:06:27,370
Now I'm going to run my test flight in order to listen.

84
00:06:27,400 --> 00:06:32,890
So I'm going to type in MSF console in order to listen on the forward for Windows machines.

85
00:06:32,890 --> 00:06:38,230
Now again if you're if you're not recording videos and there isn't much pressure on your laptop on your

86
00:06:38,830 --> 00:06:40,450
device then you can do.

87
00:06:40,450 --> 00:06:46,000
You can run it using this command but for me I'm going to just do it manually and only listen for Windows

88
00:06:46,000 --> 00:06:46,680
machines.

89
00:06:46,750 --> 00:06:50,560
If you use this command you're going to be listening to all different types of machines that you can

90
00:06:50,560 --> 00:06:57,060
target using backdoor factory the method that I'm explaining right now you can run it from Cali to the

91
00:06:57,080 --> 00:07:01,290
next and you can run from any computer given that you install the programs.

92
00:07:01,290 --> 00:07:04,350
Now Canada Next comes in with backdoor factory installed.

93
00:07:04,350 --> 00:07:09,120
So if you learned this on your Android you can actually perform it using another Linux machine.

94
00:07:09,180 --> 00:07:10,860
You can do the exact same attack

95
00:07:14,210 --> 00:07:14,700
OK.

96
00:07:14,790 --> 00:07:19,680
Now this place is working and we're going to do the exact same commands that we did when we were trying

97
00:07:19,680 --> 00:07:23,890
to use multi handler on the Linux and the previous videos.

98
00:07:23,910 --> 00:07:26,430
Except we're just typing them here and Android.

99
00:07:26,430 --> 00:07:30,470
So I'm already in multi-hundred But I type the command for you so you know what to do.

100
00:07:30,690 --> 00:07:38,050
So it's use the exploit more to learn than you set your.

101
00:07:38,060 --> 00:07:43,710
No to Windows.

102
00:07:43,950 --> 00:07:51,670
Peter rivers if you don't make make sure you have the same payload and the configuration files that

103
00:07:51,670 --> 00:07:52,780
we saw before.

104
00:07:52,900 --> 00:07:55,780
Now I'm just going to show options because they have all the options right.

105
00:07:55,780 --> 00:08:02,170
I think now if you want to change an option you just do it the same way that we did it before so they

106
00:08:02,170 --> 00:08:05,020
just do said you put the option name and the value.

107
00:08:05,020 --> 00:08:10,960
So if you want to for example change the host you just do set host and then you put the IP you know

108
00:08:10,990 --> 00:08:13,360
everything is right for me right here.

109
00:08:13,360 --> 00:08:16,030
So it's the exact same way we explained it before.

110
00:08:16,030 --> 00:08:18,010
So I'm just going to leave it.

111
00:08:18,200 --> 00:08:25,620
I'm going to do exploit and this is listening on the port so everything's perfect right now and I have

112
00:08:25,620 --> 00:08:27,410
my backdoor factory running here.

113
00:08:27,570 --> 00:08:32,240
So and I've already redirected any requests to port from Port 80 to 88.

114
00:08:32,250 --> 00:08:34,140
You are back there factor is running.

115
00:08:34,260 --> 00:08:35,520
So everything is perfect.

116
00:08:35,520 --> 00:08:40,480
We are only to do one step which is becoming the man in the middle.

117
00:08:40,680 --> 00:08:46,460
So you have the degree of choice to choose where how you want to be the man in the middle you can do

118
00:08:46,460 --> 00:08:46,620
it.

119
00:08:46,620 --> 00:08:50,760
Why make a fake access point to use in a manner you can do.

120
00:08:50,760 --> 00:08:57,510
Are people listening you can do a hazy idea about us we attack.

121
00:08:57,580 --> 00:09:05,210
For me I'm going to do IRP poisoning using Zanti because it's the easiest way so I'm going to go back

122
00:09:05,210 --> 00:09:07,130
and I'm going to search for laptops

123
00:09:12,040 --> 00:09:14,670
and I can see my device here the windows.

124
00:09:14,680 --> 00:09:15,910
It's called zoos.

125
00:09:16,180 --> 00:09:17,580
So I'm going to tap on it.

126
00:09:18,430 --> 00:09:23,830
I'm going to go to mine in the middle like we did before and as you can see all the options are off.

127
00:09:23,830 --> 00:09:29,120
I just want to point and redirect the flow packets through my device.

128
00:09:29,210 --> 00:09:34,400
So now everything is perfect and I'm just going to go again through a quick review of what we are doing

129
00:09:35,000 --> 00:09:36,920
ARPU poisoning our target.

130
00:09:37,070 --> 00:09:42,260
So we're fooling the target machine to send any packet to our device instead of the router.

131
00:09:42,410 --> 00:09:48,680
Once the packets come to our device we're redirecting them from Port 80 to 88 to use an IP tables on

132
00:09:48,680 --> 00:09:49,530
AT&amp;T.

133
00:09:49,610 --> 00:09:51,730
We have another factor you work in.

134
00:09:51,830 --> 00:09:57,140
So it's going to detect if there is any excuse woes if there is it's going to ask us to if we want to

135
00:09:57,140 --> 00:10:02,960
backdoor it if we say yes the executable is going to be backdoor and then the person can download it

136
00:10:03,170 --> 00:10:08,300
when they downloaded the executable was going to work exactly like expected but at the same time it's

137
00:10:08,300 --> 00:10:16,300
going to run our backdoor which will try to connect back to us on Meet us both using the reverse handler.

138
00:10:16,310 --> 00:10:24,800
So I'm here on my target machine and I'm going to go to 7c website and I'm going to go to the download

139
00:10:24,800 --> 00:10:34,010
page and I'm going to try to download Sivan's for my computer and when I do that I'm going to go back

140
00:10:34,010 --> 00:10:39,570
to my college machine and I'm here at the window where you can download.

141
00:10:39,570 --> 00:10:41,860
We're back to our factories working.

142
00:10:42,050 --> 00:10:47,900
And as you can see it's it's the second that the person is trying to download an executable and it usually

143
00:10:47,900 --> 00:10:49,180
shows you caves.

144
00:10:49,310 --> 00:10:57,590
Caves are gaps in the executable that we can inject our backdoor and now in this particular area we

145
00:10:57,590 --> 00:11:04,080
don't have a free cave that is enough for our acts for our backdoor or for our payload.

146
00:11:04,130 --> 00:11:06,960
So we have two options we can use jumping.

147
00:11:07,130 --> 00:11:15,530
So it's going to use smaller gaps and divide the payload into small small parts or you can just append

148
00:11:15,530 --> 00:11:18,090
it or added to the end of the file.

149
00:11:18,290 --> 00:11:24,760
So I'm going to choose to append and it's going to inject the back door as you can see expansion.

150
00:11:24,800 --> 00:11:31,970
The back door with the executable and it's offering it to the person now as you can see the person is

151
00:11:31,970 --> 00:11:33,970
being offered to download seven zip.

152
00:11:34,220 --> 00:11:38,150
So I'm going to click on Save and that has downloaded it for me.

153
00:11:38,150 --> 00:11:41,410
So I'm just going to show it in folders before I run it.

154
00:11:42,300 --> 00:11:46,400
And as you can see before seven zip did not have the icon of seven zip.

155
00:11:46,620 --> 00:11:49,150
When we when we replaced it with a backdoor.

156
00:11:49,290 --> 00:11:52,960
And now when I run it it's going to run the back door and seven zip.

157
00:11:52,950 --> 00:11:56,740
So the person will be actually able to install 7 0 on their device.

158
00:11:59,230 --> 00:12:04,460
I'm going to say Ron So as you can see it's actually trying to run 7 0.

159
00:12:04,480 --> 00:12:09,140
I'm going to say your trusted and this will install it for me.

160
00:12:09,190 --> 00:12:15,130
Now if I go back here and I'm going to go to my YOU MEET US voice what I'm listening for connections

161
00:12:16,900 --> 00:12:24,040
and as you can see that I've got an interpreter session open 2 1 9 2 1 6 8 1:17 which is me and it's

162
00:12:24,040 --> 00:12:26,270
coming from and 94.

163
00:12:26,680 --> 00:12:29,380
So I can do a quick system info to confirm

164
00:12:32,040 --> 00:12:40,730
as you can see it's the device that we're targeting it's use Windows 8 x 64.

165
00:12:40,760 --> 00:12:46,760
So this was just another scenario that shows you how we can combine the things that we learned so far

166
00:12:47,030 --> 00:12:49,450
in order to run very powerful attacks.

